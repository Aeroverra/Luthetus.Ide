@inherits Fluxor.Blazor.Web.Components.FluxorComponent

@using Luthetus.Common.RazorLib.Contexts.Displays
@using Luthetus.Common.RazorLib.Contexts.Models

<ContextBoundary ContextRecord="ContextFacts.SolutionExplorerContext"
                 ClassCssString="luth_ide_solution-explorer-display"
                 StyleCssString="height: 100%">

    @{ var localGitState = GitStateWrap.Value; }

    <div class="luth_ide_section-title">
        Git
    </div>

    <div class="luth_ide_section-body">
        <CascadingValue Value="localGitState">
            
            <GitPickGitFolderDisplay/>
            
            @if (localGitState.Repo is not null)
            {
                <div title="@localGitState.Repo.AbsolutePath.Value">
                    Repo: @localGitState.Repo.AbsolutePath.NameNoExtension
                </div>

                <div>
                    Branch:
                    
                    @if (string.IsNullOrWhiteSpace(localGitState.Branch))
                    {
                        @: null
                    }
                    else
                    {
                        @localGitState.Branch
                    }
                </div>

                <div style="text-wrap: nowrap;">
                    Origin:
                    
                    @if (string.IsNullOrWhiteSpace(localGitState.Origin))
                    {
                        @: null
                    }
                    else
                    {
                        @localGitState.Origin
                    }
                </div>

                <GitControlsDisplay />
            }
        </CascadingValue>
    </div>
</ContextBoundary>