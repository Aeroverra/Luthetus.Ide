@inherits Fluxor.Blazor.Web.Components.FluxorComponent

<div class="luth_drag-initializer"
     style="@StyleCss"
     @onmousemove="DispatchSetDragStateActionOnMouseMoveAsync"
     @onmouseup="DispatchSetDragStateActionOnMouseUp">
    
	@{
		var dragState = DragStateWrap.Value;
		var draggableViewModel = dragState.DraggableViewModel;
		var dropzoneViewModelList = draggableViewModel.DropzoneViewModelList;
	}

	@if (draggableViewModel is not null)
	{
		foreach (var dropzone in dropzoneViewModelList)
		{
			<div style="z-index: @dropzone.MeasuredHtmlElementDimensions.ZIndex; @dropzone.DropzoneElementDimensions.StyleString"
				 class="luth_dropzone @GetIsActiveCssClass(dropzone) @dropzone.CssClassString"
				 @onmouseover="() => _onMouseOverDropzone = dropzone"
				 @onmouseover:stopPropagation="true">
			</div>
		}

		if (draggableViewModel.RendererType is not null)
		{
			<div style="draggableViewModel.ElementDimensions.StyleString">
				<DynamicComponent Type="draggableViewModel.RendererType"
				                  Parameters="draggableViewModel.ParameterMap"/>	
			</div>
		}
	}
</div>